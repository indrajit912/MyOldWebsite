<!-- app/templates/_navbar.html -->

<div class="top-bar" id="top-bar">
    <div class="links" id="nav-links">
        <a href="/" class="top-link">Home</a>
        <a href="/teaching" class="top-link">Teaching</a>
        <a href="/research" class="top-link">Research</a>
        <a href="/blog" class="top-link">Blog</a>
        <a href="/cv" class="top-link" target="_blank">CV</a>
        <a href="/timeline" class="top-link">Timeline</a>
        <a href="/photos" class="top-link">Photos</a>
    </div>
    <div class="mobile-toggle" id="mobile-toggle">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
</div>

<!-- Include the expanded mobile menu overlay -->
<div id="overlay" class="overlay"></div>

<!-- Mobile menu toggle script -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toggleButton = document.getElementById("mobile-toggle");
        const overlay = document.getElementById("overlay");
        const topBar = document.getElementById("top-bar");
        const bars = toggleButton.querySelectorAll(".bar");

        toggleButton.addEventListener("click", function () {
            topBar.classList.toggle("show");
            overlay.classList.toggle("show-overlay");
            
            // Toggle the 'X' icon
            bars.forEach(bar => {
                bar.classList.toggle("change");
            });
            
            // Add smooth animation to display the overlay with cubic bezier easing
            if (overlay.classList.contains("show-overlay")) {
                overlay.style.animation = "fade-in 5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards"; // Adjust the easing here
            } else {
                overlay.style.animation = "fade-out 0.3s forwards";
            }
        });

        // Close the menu when clicking outside of it
        overlay.addEventListener("click", function () {
            topBar.classList.remove("show");
            overlay.classList.remove("show-overlay");
            bars.forEach(bar => {
                bar.classList.remove("change");
            });
            
            // Add smooth animation to hide the overlay
            overlay.style.animation = "fade-out 5s forwards";
        });
    });
</script>